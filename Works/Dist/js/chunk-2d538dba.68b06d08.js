(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d538dba"],{"053b":function(t,a,s){var e=s("1e2c"),i=s("d910").f,n=Function.prototype,r=n.toString,d=/^\s*function ([^ (]*)/,o="name";e&&!(o in n)&&i(n,o,{configurable:!0,get:function(){try{return r.call(this).match(d)[1]}catch(t){return""}}})},1462:function(t,a,s){"use strict";function e(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}s.d(a,"a",(function(){return e}))},"2eeb":function(t,a,s){"use strict";var e=s("1c8b"),i=s("5dfd").map,n=s("1ea7"),r=s("ff9c"),d=n("map"),o=r("map");e({target:"Array",proto:!0,forced:!d||!o},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"2f14":function(t,a,s){"use strict";s.d(a,"a",(function(){return r}));s("b4fb"),s("77ad");var e=s("1462"),i=s("a340"),n=function(){function t(){Object(e["a"])(this,t)}return Object(i["a"])(t,[{key:"queryString",value:function(t){var a="";for(var s in t)"confirmpassword"!==s&&(a+="".concat(s,"=").concat(t[s],"&"));return a.slice(0,-1)}}]),t}(),r=new n},"9ac3":function(t,a,s){},a340:function(t,a,s){"use strict";function e(t,a){for(var s=0;s<a.length;s++){var e=a[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function i(t,a,s){return a&&e(t.prototype,a),s&&e(t,s),t}s.d(a,"a",(function(){return i}))},a914:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"orderpage"},[s("div",{staticClass:"head"},[s("van-nav-bar",{attrs:{fixed:!0,border:!1},on:{"click-left":t.fhiu},scopedSlots:t._u([{key:"left",fn:function(){return[s("van-icon",{attrs:{name:"arrow-left",size:"30",color:"#5e5e5e"}})]},proxy:!0}])})],1),t._m(0),s("div",{staticClass:"ordercontent"},[s("div",{staticClass:"address"},[t._m(1),s("div",{staticClass:"address-content",on:{click:t.getaddress}},[s("div",{staticClass:"content"},[s("div",{staticClass:"content-left"},[s("p",[s("span",[s("van-icon",{attrs:{name:"location",size:"14",color:"#7fc6bf"}})],1),""==t.displayaddress.address?s("span",[t._v("你没有找到默认地址,请重新选择地址。")]):t._e(),s("span",[t._v(t._s(t.displayaddress.address))]),t.displayaddress.isDefault?s("span",[t._v("默认")]):t._e()]),s("p",[s("span",[t._v(t._s(t.displayaddress.name))]),s("span",[t._v(t._s(t.displayaddress.tel))])])]),s("div",{staticClass:"content-right"},[s("div",[s("van-icon",{attrs:{name:"arrow",size:"25",color:"#d8cdcd"}})],1)])])])]),s("div",{staticClass:"commodity"},[t._m(2),t._l(t.commoditydata,(function(a,e){return s("div",{key:e,staticClass:"commodity-center"},[s("van-swipe-cell",{scopedSlots:t._u([{key:"default",fn:function(){return[s("div",{staticClass:"detailed"},[s("p",[s("span",[t._v(t._s(a.name))]),s("span",[t._v("￥"+t._s(a.price))])]),s("p",[s("span",[t._v(t._s(a.rule))]),s("span",[t._v("*"+t._s(a.count))])])])]},proxy:!0}],null,!0)})],1)}))],2),s("div",{staticClass:"totalprice"},[s("p",[s("span",[t._v("总计")]),s("strong",[s("span",[t._v("￥")]),s("span",[t._v(t._s(t.totalprice)+".00")])])])])]),s("div",{staticClass:"addtocart"},[s("div",{staticClass:"addtocart-center",on:{click:t.payment}},[s("div",[t._v(t._s(t.totalquantity)+" 杯")]),s("div",[t._v("立即支付")]),s("div",[t._v("￥"+t._s(t.totalprice)+".00")])])]),s("div",{staticClass:"popup"},[s("van-popup",{attrs:{round:"",closeable:"",position:"bottom"},model:{value:t.isshow,callback:function(a){t.isshow=a},expression:"isshow"}},[s("div",{staticClass:"address"},[s("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认"},on:{add:t.Jumptoadd,select:t.selectaddress,edit:t.jumpedit},model:{value:t.chosenAddressId,callback:function(a){t.chosenAddressId=a},expression:"chosenAddressId"}})],1)])],1)])},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"title"},[s("h1",[t._v("订单确认")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"tips"},[s("p",[t._v("为确保您的用餐体验, 请确认您的信息。")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"tips"},[s("p",[t._v("您选择的商品。")])])}],n=(s("2eeb"),s("053b"),s("9ac3"),s("2f14")),r={name:"Orderpage",data:function(){return{sid:[],commoditydata:[],isshow:!1,chosenAddressId:0,list:[],displayaddress:{name:"",tel:"",address:"",isDefault:!1},totalprice:0,totalquantity:0}},created:function(){this.getdefaultaddress(),this.getmerchandise()},methods:{fhiu:function(){this.$router.push({name:"Shobag"})},getmerchandise:function(){var t=this;this.sid=this.$route.query.sid;var a="";a="string"==typeof this.sid?JSON.stringify([this.sid]):JSON.stringify(this.sid);var s=localStorage.getItem("NO");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"circular"}),this.axios({method:"GET",url:"/commitShopcart",params:{appkey:this.appkey,tokenString:s,sids:a}}).then((function(a){var s=a.data.result;5e4==a.data.code&&(t.$toast.clear(),s.map((function(a){t.commoditydata.push(a),t.totalprice+=a.count*parseFloat(a.price),t.totalquantity+=a.count})))}))},getdefaultaddress:function(){var t=this,a=localStorage.getItem("NO");this.axios({method:"GET",url:"/findAddress",params:{appkey:this.appkey,tokenString:a}}).then((function(a){var s=a.data.result;2e4==a.data.code&&s.map((function(a){a.isDefault&&(t.displayaddress.name=a.name,t.displayaddress.tel=a.tel,t.displayaddress.address=a.province+a.city+a.county+a.addressDetail,t.displayaddress.isDefault=Boolean(a.isDefault),a.isDefault&&(t.chosenAddressId=a.id))}))})).catch((function(t){}))},getaddress:function(){var t=this;this.isshow=!0;var a=localStorage.getItem("NO");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"circular"}),this.axios({method:"GET",url:"/findAddress",params:{appkey:this.appkey,tokenString:a}}).then((function(a){var s=a.data.result;2e4==a.data.code&&(t.list=[],t.$toast.clear(),s.map((function(a){t.list.push({id:a.id,aid:a.aid,name:a.name,tel:a.tel,address:a.province+a.city+a.county+a.addressDetail,isDefault:Boolean(a.isDefault),province:a.province,city:a.city,county:a.county,addressDetail:a.addressDetail,areaCode:a.areaCode,postalCode:a.postalCode})})))})).catch((function(t){}))},selectaddress:function(t){this.isshow=!1,this.displayaddress.name=t.name,this.displayaddress.tel=t.tel,this.displayaddress.address=t.address,this.displayaddress.isDefault=Boolean(t.isDefault),this.chosenAddressId=t.id},Jumptoadd:function(){this.$router.push({name:"Newaddress"})},jumpedit:function(t){this.$router.push({name:"Editaddress",query:{editdata:t}})},payment:function(){var t=this,a=localStorage.getItem("NO");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"circular"});var s={appkey:this.appkey,tokenString:a,sids:JSON.stringify(this.sid),phone:this.displayaddress.tel,address:this.displayaddress.address,receiver:this.displayaddress.name};s=n["a"].queryString(s),this.axios({method:"POST",url:"/pay",data:s}).then((function(a){6e4==a.data.code&&(t.$toast.success("结算成功"),setTimeout((function(){t.$router.push({name:"Shobag"})}),1e3))}))}}},d=r,o=s("9ca4"),c=Object(o["a"])(d,e,i,!1,null,null,null);a["default"]=c.exports},b4fb:function(t,a,s){"use strict";var e=s("1c8b"),i=s("efe2"),n=s("74e7"),r=s("a719"),d=s("3553"),o=s("d88d"),c=s("1bbd"),l=s("1ca1"),u=s("1ea7"),p=s("90fb"),f=s("f594"),h=p("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",y=f>=51||!i((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),g=u("concat"),_=function(t){if(!r(t))return!1;var a=t[h];return void 0!==a?!!a:n(t)},b=!y||!g;e({target:"Array",proto:!0,forced:b},{concat:function(t){var a,s,e,i,n,r=d(this),u=l(r,0),p=0;for(a=-1,e=arguments.length;a<e;a++)if(n=-1===a?r:arguments[a],_(n)){if(i=o(n.length),p+i>v)throw TypeError(m);for(s=0;s<i;s++,p++)s in n&&c(u,p,n[s])}else{if(p>=v)throw TypeError(m);c(u,p++,n)}return u.length=p,u}})}}]);
//# sourceMappingURL=chunk-2d538dba.68b06d08.js.map